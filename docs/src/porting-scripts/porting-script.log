#!/bin/sh -v
#

#
# CDDL HEADER START
#
# The contents of this file are subject to the terms of the Common Development
# and Distribution License Version 1.0 (the "License").
#
# You can obtain a copy of the license at
# http://www.opensource.org/licenses/CDDL-1.0.  See the License for the
# specific language governing permissions and limitations under the License.
#
# When distributing Covered Code, include this CDDL HEADER in each file and
# include the License file in a prominent location with the name LICENSE.CDDL.
# If applicable, add the following below this CDDL HEADER, with the fields
# enclosed by brackets "[]" replaced with your own identifying information:
#
# Portions Copyright (c) [yyyy] [name of copyright owner]. All rights reserved.
#
# CDDL HEADER END
#

#
# Copyright (c) 2018, Regents of the University of Minnesota.
# All rights reserved.
#
# Contributors:
#    Ryan S. Elliott
#

#
# Release: This file is part of the kim-api.git repository.
#

PRMPT=''
REDIRECT_DEV_NULL=/dev/null

$ cd ${HOME}
$ mkdir kim-api-porting
$ cd kim-api-porting

#//! [Setup kim-api v1 and v2]
$ wget https://s3.openkim.org/kim-api/kim-api-v1.9.7.txz
$ tar Jxf kim-api-v1.9.7.txz
$ rm kim-api-v1.9.7.txz
$ cd kim-api-v1.9.7
$ ./configure --prefix=${HOME}/kim-api-porting/kim-api-installed
$ make
$ make install
$ cd ..

$ wget https://s3.openkim.org/kim-api/kim-api-v2.0.0-beta..txz
$ tar Jxf kim-api-v2.0.0-beta..txz
$ rm kim-api-v2.0.0-beta..txz
$ cd kim-api-v2.0.0-beta.1
$ ./configure --prefix=${HOME}/kim-api-porting/kim-api-installed --log-maximum-level=KIM_LOG_VERBOSITY_DEBUG_
$ make
$ make install
$ cd ..
#//! [Setup kim-api v1 and v2]

#//! [Activate kim-api]
$ source ${HOME}/kim-api-porting/kim-api-installed/bin/kim-api-v1-activate
#!/bin/sh
#

#
# CDDL HEADER START
#
# The contents of this file are subject to the terms of the Common Development
# and Distribution License Version 1.0 (the "License").
#
# You can obtain a copy of the license at
# http://www.opensource.org/licenses/CDDL-1.0.  See the License for the
# specific language governing permissions and limitations under the License.
#
# When distributing Covered Code, include this CDDL HEADER in each file and
# include the License file in a prominent location with the name LICENSE.CDDL.
# If applicable, add the following below this CDDL HEADER, with the fields
# enclosed by brackets "[]" replaced with your own identifying information:
#
# Portions Copyright (c) [yyyy] [name of copyright owner]. All rights reserved.
#
# CDDL HEADER END
#

#
# Copyright (c) 2018, Regents of the University of Minnesota.
# All rights reserved.
#
# Contributors:
#    Ryan S. Elliott
#

#
# Release: This file is part of the kim-api.git repository.
#


_package_dir=/Users/relliott/kim-api-porting/kim-api-installed/lib/kim-api-v1
_sysconfdir=/Users/relliott/kim-api-porting/kim-api-installed/etc
_full_package_name=kim-api-v1

# Ensure that this script is sourced, not executed
if test x"`basename "$0" 2> /dev/null`" \
        = x"${_full_package_name}-activate"; then
  (>&2 printf "Error:\t${_full_package_name}-activate must be sourced.\n"
   printf "\tRun 'source ${_full_package_name}-activate' not "
   printf "'${_full_package_name}-activate'.\n")
  exit 1
fi
basename "$0" 2> /dev/null

export PATH="${_package_dir}/bin:${PATH}"

source "${_sysconfdir}/bash_completion.d/${_full_package_name}-completion.bash"
#
# CDDL HEADER START
#
# The contents of this file are subject to the terms of the Common Development
# and Distribution License Version 1.0 (the "License").
#
# You can obtain a copy of the license at
# http://www.opensource.org/licenses/CDDL-1.0.  See the License for the
# specific language governing permissions and limitations under the License.
#
# When distributing Covered Code, include this CDDL HEADER in each file and
# include the License file in a prominent location with the name LICENSE.CDDL.
# If applicable, add the following below this CDDL HEADER, with the fields
# enclosed by brackets "[]" replaced with your own identifying information:
#
# Portions Copyright (c) [yyyy] [name of copyright owner]. All rights reserved.
#
# CDDL HEADER END
#

#
# Copyright (c) 2018, Regents of the University of Minnesota.
# All rights reserved.
#
# Contributors:
#    Ryan S. Elliott
#

#
# Release: This file is part of the kim-api.git repository.
#

_kim_api_v1_build_config()
{
  local cur stand_alone_opts combine_opts
  # NOTE: leading and trailing spaces are necessary for the below two vars.
  stand_alone_opts=" --makefile-kim-config --master-config --libexec-path"
  stand_alone_opts="${stand_alone_opts} --cc --cxx --fc --ld --objonlyflag"
  stand_alone_opts="${stand_alone_opts} --outputinflag --version --help "
  combine_opts=" --includes --cflags --cxxflags --ldflags"
  combine_opts="${combine_opts} --ldlibs --xlangldlibs --fnomainflag "

  COMPREPLY=()
  cur="${COMP_WORDS[COMP_CWORD]}"

  if test ${COMP_CWORD} -eq 1; then
    COMPREPLY=( $(compgen -W "${stand_alone_opts} ${combine_opts}" \
                          -- "${cur}") )
    return 0
  elif printf "%s" "${stand_alone_opts}" | \
      grep -- "${COMP_WORDS[1]}" > /dev/null 2>&1; then
    return 0
  else
    for opt in "${COMP_WORDS[@]:1:${COMP_CWORD}-1}"; do
      combine_opts=`printf "%s" "${combine_opts}" | sed -e "s/ ${opt} / /"`
    done

    COMPREPLY=( $(compgen -W "${combine_opts}" -- "${cur}") )
    return 0
  fi

  return 1
}
complete -F _kim_api_v1_build_config kim-api-v1-build-config


_kim_api_v1_collections_management()
{
  local collections_info
  collections_info=/Users/relliott/kim-api-porting/kim-api-installed/lib/kim-api-v1/libexec/kim-api-v1/kim-api-v1-collections-info

  local cur subcommands opts
  subcommands="list set-user-models-dir set-user-drivers-dir install reinstall"
  subcommands="${subcommands} remove remove-all"

  COMPREPLY=()
  cur="${COMP_WORDS[COMP_CWORD]}"

  if test ${COMP_CWORD} -eq 1; then
    COMPREPLY=( $(compgen -W "${subcommands}" -- "${cur}") )
    return 0
  else
    case "${COMP_WORDS[1]}" in
      list)
        opts=""
        if test ${COMP_CWORD} -eq 2; then
          opts="--with-version --log"
        elif test ${COMP_CWORD} -eq 3 -a x"--with-version" = x"${COMP_WORDS[2]}"; then
          opts="--log"
        elif test ${COMP_CWORD} -eq 3 -a x"--log" = x"${COMP_WORDS[2]}"; then
          opts="--with-version"
        else
          return 1
        fi
        COMPREPLY=( $(compgen -W "${opts}" -- "${cur}") )
        return 0
        ;;
      set-user-*)
        if test ${COMP_CWORD} -gt 2; then
          return 1
        else
          _cd
          return 0
        fi
        ;;
      install)
        if test ${COMP_CWORD} -eq 2; then
          COMPREPLY=( $(compgen -W "--force CWD environment user system" \
                                -- "${cur}") )
          return 0
        fi
        if test ${COMP_CWORD} -eq 3 -a x"${COMP_WORDS[2]}" = x"--force"; then
          COMPREPLY=( $(compgen -W "CWD environment user system" \
                                -- "${cur}") )
          return 0
        fi
        local collection_position
        if test x"${COMP_WORDS[2]}" = x"--force"; then
          collection_position=3
        else
          collection_position=2
        fi
        opts=""
        if test ${COMP_CWORD} -eq ${collection_position} \
                -a x"system" = x"${COMP_WORDS[${collection_position}]}"; then
          opts="--sudo OpenKIM OpenKIM_with_history"
        elif test ${COMP_CWORD} -eq 3; then
          opts="OpenKIM OpenKIM_with_history"
        fi

        local query='query={"type":"mo","kim-api-version":{"$regex":"^1\\."}}'
        query="${query}"'&fields={"kimcode":1}'
        query="${query}"'&database=obj&history=on'
        local list=`wget -q -O - --post-data="${query}" \
                    https://query.openkim.org/api | \
                    sed -e 's/\[//g' -e 's/\]//g' \
                    -e 's/{"kimcode": "\([^"]*\)"},*/\1/g'`
        opts="${opts} ${list}"

        _cd
        COMPREPLY=( "${COMPREPLY[@]}" $(compgen -W "${opts}" -- "${cur}") )
        return 0
        ;;
      reinstall|remove)
        opts=""
        if test ${COMP_CWORD} -eq 2; then
          opts="--interactive --sudo"
        elif test ${COMP_CWORD} -eq 3 -a x"--interactive" = x"${COMP_WORDS[2]}"; then
          opts="--sudo"
        elif test ${COMP_CWORD} -eq 3 -a x"--sudo" = x"${COMP_WORDS[2]}"; then
          opts="--interactive"
        fi
        local models drivers
        models=`${collections_info} models | sed -e 's|[^[:space:]]* \([^[:space:]]*\) .*|\1|'`
        drivers=`${collections_info} model_drivers | sed -e 's|[^[:space:]]* \([^[:space:]]*\) .*|\1|'`
        opts="${opts} ${models} ${drivers}"

        if test x"reinstall" = x"${COMP_WORDS[1]}"; then
          _cd
        fi
        COMPREPLY=( "${COMPREPLY[@]}" $(compgen -W "${opts}" -- "${cur}") )
        return 0
        ;;
      remove-all)
        opts=""
        if test ${COMP_CWORD} -eq 2; then
          opts="--interactive --sudo"
        elif test ${COMP_CWORD} -eq 3 -a x"--interactive" = x"${COMP_WORDS[2]}"; then
          opts="--sudo"
        elif test ${COMP_CWORD} -eq 3 -a x"--sudo" = x"${COMP_WORDS[2]}"; then
          opts="--interactive"
        fi
        COMPREPLY=( $(compgen -W "${opts}" -- "${cur}") )
        return 0
        ;;
      *)
        return 1
        ;;
    esac
  fi
  return 1
}
complete -F _kim_api_v1_collections_management kim-api-v1-collections-management

unset _package_dir
unset _sysconfdir
unset _full_package_name
$ source ${HOME}/kim-api-porting/kim-api-installed/bin/kim-api-v2-activate
#!/bin/sh
#

#
# CDDL HEADER START
#
# The contents of this file are subject to the terms of the Common Development
# and Distribution License Version 1.0 (the "License").
#
# You can obtain a copy of the license at
# http://www.opensource.org/licenses/CDDL-1.0.  See the License for the
# specific language governing permissions and limitations under the License.
#
# When distributing Covered Code, include this CDDL HEADER in each file and
# include the License file in a prominent location with the name LICENSE.CDDL.
# If applicable, add the following below this CDDL HEADER, with the fields
# enclosed by brackets "[]" replaced with your own identifying information:
#
# Portions Copyright (c) [yyyy] [name of copyright owner]. All rights reserved.
#
# CDDL HEADER END
#

#
# Copyright (c) 2018, Regents of the University of Minnesota.
# All rights reserved.
#
# Contributors:
#    Ryan S. Elliott
#

#
# Release: This file is part of the kim-api.git repository.
#


_package_dir=/Users/relliott/kim-api-porting/kim-api-installed/lib/kim-api-v2
_sysconfdir=/Users/relliott/kim-api-porting/kim-api-installed/etc
_full_package_name=kim-api-v2

# Ensure that this script is sourced, not executed
if test x"`basename "$0" 2> /dev/null`" \
        = x"${_full_package_name}-activate"; then
  (>&2 printf "Error:\t${_full_package_name}-activate must be sourced.\n"
   printf "\tRun 'source ${_full_package_name}-activate' not "
   printf "'${_full_package_name}-activate'.\n")
  exit 1
fi
basename "$0" 2> /dev/null

export PATH="${_package_dir}/bin:${PATH}"

source "${_sysconfdir}/bash_completion.d/${_full_package_name}-completion.bash"
#
# CDDL HEADER START
#
# The contents of this file are subject to the terms of the Common Development
# and Distribution License Version 1.0 (the "License").
#
# You can obtain a copy of the license at
# http://www.opensource.org/licenses/CDDL-1.0.  See the License for the
# specific language governing permissions and limitations under the License.
#
# When distributing Covered Code, include this CDDL HEADER in each file and
# include the License file in a prominent location with the name LICENSE.CDDL.
# If applicable, add the following below this CDDL HEADER, with the fields
# enclosed by brackets "[]" replaced with your own identifying information:
#
# Portions Copyright (c) [yyyy] [name of copyright owner]. All rights reserved.
#
# CDDL HEADER END
#

#
# Copyright (c) 2018, Regents of the University of Minnesota.
# All rights reserved.
#
# Contributors:
#    Ryan S. Elliott
#

#
# Release: This file is part of the kim-api.git repository.
#

_kim_api_v2_build_config()
{
  local cur stand_alone_opts combine_opts
  # NOTE: leading and trailing spaces are necessary for the below two vars.
  stand_alone_opts=" --makefile-kim-config --master-config --libexec-path"
  stand_alone_opts="${stand_alone_opts} --cc --cxx --fc --ld --objonlyflag"
  stand_alone_opts="${stand_alone_opts} --outputinflag --version --help "
  combine_opts=" --includes --cflags --cxxflags --ldflags"
  combine_opts="${combine_opts} --ldlibs --xlangldlibs --fnomainflag "

  COMPREPLY=()
  cur="${COMP_WORDS[COMP_CWORD]}"

  if test ${COMP_CWORD} -eq 1; then
    COMPREPLY=( $(compgen -W "${stand_alone_opts} ${combine_opts}" \
                          -- "${cur}") )
    return 0
  elif printf "%s" "${stand_alone_opts}" | \
      grep -- "${COMP_WORDS[1]}" > /dev/null 2>&1; then
    return 0
  else
    for opt in "${COMP_WORDS[@]:1:${COMP_CWORD}-1}"; do
      combine_opts=`printf "%s" "${combine_opts}" | sed -e "s/ ${opt} / /"`
    done

    COMPREPLY=( $(compgen -W "${combine_opts}" -- "${cur}") )
    return 0
  fi

  return 1
}
complete -F _kim_api_v2_build_config kim-api-v2-build-config


_kim_api_v2_collections_management()
{
  local collections_info
  collections_info=/Users/relliott/kim-api-porting/kim-api-installed/lib/kim-api-v2/libexec/kim-api-v2/kim-api-v2-collections-info

  local cur subcommands opts
  subcommands="list set-user-models-dir set-user-drivers-dir install reinstall"
  subcommands="${subcommands} remove remove-all"

  COMPREPLY=()
  cur="${COMP_WORDS[COMP_CWORD]}"

  if test ${COMP_CWORD} -eq 1; then
    COMPREPLY=( $(compgen -W "${subcommands}" -- "${cur}") )
    return 0
  else
    case "${COMP_WORDS[1]}" in
      list)
        opts=""
        if test ${COMP_CWORD} -eq 2; then
          opts="--with-version --log"
        elif test ${COMP_CWORD} -eq 3 -a x"--with-version" = x"${COMP_WORDS[2]}"; then
          opts="--log"
        elif test ${COMP_CWORD} -eq 3 -a x"--log" = x"${COMP_WORDS[2]}"; then
          opts="--with-version"
        else
          return 1
        fi
        COMPREPLY=( $(compgen -W "${opts}" -- "${cur}") )
        return 0
        ;;
      set-user-*)
        if test ${COMP_CWORD} -gt 2; then
          return 1
        else
          _cd
          return 0
        fi
        ;;
      install)
        if test ${COMP_CWORD} -eq 2; then
          COMPREPLY=( $(compgen -W "--force CWD environment user system" \
                                -- "${cur}") )
          return 0
        fi
        if test ${COMP_CWORD} -eq 3 -a x"${COMP_WORDS[2]}" = x"--force"; then
          COMPREPLY=( $(compgen -W "CWD environment user system" \
                                -- "${cur}") )
          return 0
        fi
        local collection_position
        if test x"${COMP_WORDS[2]}" = x"--force"; then
          collection_position=3
        else
          collection_position=2
        fi
        opts=""
        if test ${COMP_CWORD} -eq ${collection_position} \
                -a x"system" = x"${COMP_WORDS[${collection_position}]}"; then
          opts="--sudo OpenKIM OpenKIM_with_history"
        elif test ${COMP_CWORD} -eq 3; then
          opts="OpenKIM OpenKIM_with_history"
        fi

        local query='query={"type":"mo","kim-api-version":{"$regex":"^2\\."}}'
        query="${query}"'&fields={"kimcode":1}'
        query="${query}"'&database=obj&history=on'
        local list=`wget -q -O - --post-data="${query}" \
                    https://query.openkim.org/api | \
                    sed -e 's/\[//g' -e 's/\]//g' \
                    -e 's/{"kimcode": "\([^"]*\)"},*/\1/g'`
        opts="${opts} ${list}"

        _cd
        COMPREPLY=( "${COMPREPLY[@]}" $(compgen -W "${opts}" -- "${cur}") )
        return 0
        ;;
      reinstall|remove)
        opts=""
        if test ${COMP_CWORD} -eq 2; then
          opts="--interactive --sudo"
        elif test ${COMP_CWORD} -eq 3 -a x"--interactive" = x"${COMP_WORDS[2]}"; then
          opts="--sudo"
        elif test ${COMP_CWORD} -eq 3 -a x"--sudo" = x"${COMP_WORDS[2]}"; then
          opts="--interactive"
        fi
        local models drivers
        models=`${collections_info} models | sed -e 's|[^[:space:]]* \([^[:space:]]*\) .*|\1|'`
        drivers=`${collections_info} model_drivers | sed -e 's|[^[:space:]]* \([^[:space:]]*\) .*|\1|'`
        opts="${opts} ${models} ${drivers}"

        if test x"reinstall" = x"${COMP_WORDS[1]}"; then
          _cd
        fi
        COMPREPLY=( "${COMPREPLY[@]}" $(compgen -W "${opts}" -- "${cur}") )
        return 0
        ;;
      remove-all)
        opts=""
        if test ${COMP_CWORD} -eq 2; then
          opts="--interactive --sudo"
        elif test ${COMP_CWORD} -eq 3 -a x"--interactive" = x"${COMP_WORDS[2]}"; then
          opts="--sudo"
        elif test ${COMP_CWORD} -eq 3 -a x"--sudo" = x"${COMP_WORDS[2]}"; then
          opts="--interactive"
        fi
        COMPREPLY=( $(compgen -W "${opts}" -- "${cur}") )
        return 0
        ;;
      *)
        return 1
        ;;
    esac
  fi
  return 1
}
complete -F _kim_api_v2_collections_management kim-api-v2-collections-management

unset _package_dir
unset _sysconfdir
unset _full_package_name
#//! [Activate kim-api]

#//! [Copy porting examples]
$ cp -r ./kim-api-v2.0.0-beta.1/docs/porting-content-from-v1-to-v2-examples v1-v2-porting
#//! [Copy porting examples]

#//! [Install step0 models]
$ kim-api-v1-collections-management install system ./v1-v2-porting/models/step0/ex_model_Ar_P_MLJ_F03
Installing..... Model.......... ex_model_Ar_P_MLJ_F03.

Success!

$ kim-api-v1-collections-management install system ./v1-v2-porting/models/step0/ex_model_Ar_P_Morse_07C
Installing..... Model.......... ex_model_Ar_P_Morse_07C.

Success!
#//! [Install step0 models]

#//! [Step0 test example]
$ cp -r v1-v2-porting/simulators/step0/ex_test_Ar_fcc_cluster ./v1-ex_test_Ar_fcc_cluster
$ cd v1-ex_test_Ar_fcc_cluster
$ make
$ printf ex_model_Ar_P_MLJ_F03 | ./ex_test_Ar_fcc_cluster
Please enter valid KIM Model name:
This is Test  : ex_test_Ar_fcc_cluster
--------------------------------------------------------------------------------
Results for KIM Model : ex_model_Ar_P_MLJ_F03
              Energy,           Force Norm,      Lattice Spacing
    2.6568305947e+01,     1.2671877978e+01,     4.2080000000e+00
    1.5269225751e+01,     7.9639127468e+00,     4.3395000000e+00
    8.1940651929e+00,     4.9863838571e+00,     4.4710000000e+00
    3.7947024307e+00,     3.0924620572e+00,     4.6025000000e+00
    1.0980474405e+00,     1.8835116189e+00,     4.7340000000e+00
   -5.1288233270e-01,     1.1111343811e+00,     4.8655000000e+00
   -1.4321763817e+00,     6.1892128072e-01,     4.9970000000e+00
   -1.9129769394e+00,     3.0756389059e-01,     5.1285000000e+00
   -2.1185529279e+00,     1.1421905922e-01,     5.2600000000e+00
   -2.1545585638e+00,     2.4987808283e-02,     5.3915000000e+00
   -2.0893135757e+00,     8.1104969450e-02,     5.5230000000e+00
   -1.9668026189e+00,     1.1844534144e-01,     5.6545000000e+00
   -1.8151243558e+00,     1.3646818860e-01,     5.7860000000e+00
   -1.6520140667e+00,     1.4203290937e-01,     5.9175000000e+00
   -1.4884681605e+00,     1.3991074278e-01,     6.0490000000e+00
   -1.3310358744e+00,     1.3327798308e-01,     6.1805000000e+00

$ printf ex_model_Ar_P_Morse_07C | ./ex_test_Ar_fcc_cluster
Please enter valid KIM Model name:
This is Test  : ex_test_Ar_fcc_cluster
--------------------------------------------------------------------------------
Results for KIM Model : ex_model_Ar_P_Morse_07C
              Energy,           Force Norm,      Lattice Spacing
    1.4703219623e+01,     6.9678657557e+00,     4.2080000000e+00
    8.2453550705e+00,     4.8650873812e+00,     4.3395000000e+00
    3.7883556879e+00,     3.3409407134e+00,     4.4710000000e+00
    7.7810749699e-01,     2.2399352517e+00,     4.6025000000e+00
   -1.1944148939e+00,     1.4518130136e+00,     4.7340000000e+00
   -2.4291941022e+00,     8.9239060716e-01,     4.8655000000e+00
   -3.1445433206e+00,     5.0063786968e-01,     4.9970000000e+00
   -3.4996095359e+00,     2.3199479279e-01,     5.1285000000e+00
   -3.6112724693e+00,     6.3687021777e-02,     5.2600000000e+00
   -3.5604853404e+00,     8.7536239707e-02,     5.3915000000e+00
   -3.4059878193e+00,     1.5700051389e-01,     5.5230000000e+00
   -3.1896247548e+00,     1.9909723852e-01,     5.6545000000e+00
   -2.9407853637e+00,     2.1928061006e-01,     5.7860000000e+00
   -2.6800661721e+00,     2.2574027063e-01,     5.9175000000e+00
   -2.4197463013e+00,     2.2234487833e-01,     6.0490000000e+00
   -2.1685167432e+00,     2.1265537489e-01,     6.1805000000e+00

$ cd ..
#//! [Step0 test example]



#//! [Install step1 models]
$ kim-api-v1-collections-management install system ./v1-v2-porting/models/step1/ex_model_Ar_P_MLJ_F03
Installing..... Model.......... ex_model_Ar_P_MLJ_F03_step1.

Success!

$ kim-api-v1-collections-management install system ./v1-v2-porting/models/step1/ex_model_Ar_P_Morse_07C
Installing..... Model.......... ex_model_Ar_P_Morse_07C_step1.

Success!
#//! [Install step1 models]

#//! [Collections v1 list]
$ kim-api-v1-collections-management list


Knowledgebase of Interatomic Models (KIM)  ---  Model Collections Listing
===============================================================================

kim-api library:
	.../kim-api-porting/kim-api-installed/lib/kim-api-v1/libkim-api-v1.9.7+GCC.darwin.32bit.dynamic-load.so

kim-api configuration file:
	/Users/relliott/.kim-api/config-v1


Environment Variables:
-------------------------------------------------------------------------------
KIM_API_USER_CONFIG_FILE:
	--empty--

KIM_API_MODEL_DRIVERS_DIR:
	--empty--

KIM_API_MODELS_DIR:
	--empty--

===============================================================================



Current Working Directory Collection
-------------------------------------------------------------------------------
Drivers: /Users/relliott/kim-api-porting
	--empty--

Models: /Users/relliott/kim-api-porting
	--empty--


Environment Variable Collection
-------------------------------------------------------------------------------
Drivers: --empty--
	--empty--

Models: --empty--
	--empty--


User Collection
-------------------------------------------------------------------------------
Drivers: /Users/relliott/.kim-api/v1_model_drivers
	--empty--

Models: /Users/relliott/.kim-api/v1_models
	--empty--


System Collection
-------------------------------------------------------------------------------
Drivers: /Users/relliott/kim-api-porting/kim-api-installed/lib/kim-api-v1/model_drivers
	--empty--


Models: /Users/relliott/kim-api-porting/kim-api-installed/lib/kim-api-v1/models
	ex_model_Ar_P_MLJ_F03
	ex_model_Ar_P_MLJ_F03_step1
	ex_model_Ar_P_Morse_07C
	ex_model_Ar_P_Morse_07C_step1

#//! [Collections v1 list]

#//! [Step1 test example]
$ cd v1-ex_test_Ar_fcc_cluster
$ printf ex_model_Ar_P_MLJ_F03_step1 | ./ex_test_Ar_fcc_cluster
Please enter valid KIM Model name:
This is Test  : ex_test_Ar_fcc_cluster
--------------------------------------------------------------------------------
Results for KIM Model : ex_model_Ar_P_MLJ_F03_step1
              Energy,           Force Norm,      Lattice Spacing
    2.6568305947e+01,     1.2671877978e+01,     4.2080000000e+00
    1.5269225751e+01,     7.9639127468e+00,     4.3395000000e+00
    8.1940651929e+00,     4.9863838571e+00,     4.4710000000e+00
    3.7947024307e+00,     3.0924620572e+00,     4.6025000000e+00
    1.0980474405e+00,     1.8835116189e+00,     4.7340000000e+00
   -5.1288233270e-01,     1.1111343811e+00,     4.8655000000e+00
   -1.4321763817e+00,     6.1892128072e-01,     4.9970000000e+00
   -1.9129769394e+00,     3.0756389059e-01,     5.1285000000e+00
   -2.1185529279e+00,     1.1421905922e-01,     5.2600000000e+00
   -2.1545585638e+00,     2.4987808283e-02,     5.3915000000e+00
   -2.0893135757e+00,     8.1104969450e-02,     5.5230000000e+00
   -1.9668026189e+00,     1.1844534144e-01,     5.6545000000e+00
   -1.8151243558e+00,     1.3646818860e-01,     5.7860000000e+00
   -1.6520140667e+00,     1.4203290937e-01,     5.9175000000e+00
   -1.4884681605e+00,     1.3991074278e-01,     6.0490000000e+00
   -1.3310358744e+00,     1.3327798308e-01,     6.1805000000e+00

$ cd ..
#//! [Step1 test example]

#//! [Install step3 models]
$ kim-api-v2-collections-management install system ./v1-v2-porting/models/step3/ex_model_Ar_P_MLJ_F03
Installing..... Model.......... ex_model_Ar_P_MLJ_F03_step3.

Success!

$ kim-api-v2-collections-management install system ./v1-v2-porting/models/step3/ex_model_Ar_P_Morse_07C
Installing..... Model.......... ex_model_Ar_P_Morse_07C_step3.

Success!
#//! [Install step3 models]

#//! [Step3 test setup]
$ cp -r v1-v2-porting/simulators/step5/ex_test_Ar_fcc_cluster v2-ex_test_Ar_fcc_cluster
$ cd v2-ex_test_Ar_fcc_cluster
$ make
#//! [Step3 test setup]
#//! [Step3 test example]
$ printf ex_model_Ar_P_Morse_07C_step3 | ./ex_test_Ar_fcc_cluster
Please enter valid KIM Model name:
================================================================================

Model object
------------

Model Name : ex_model_Ar_P_Morse_07C_step3
Log ID : 0x7a645d90

Model Supplied Functions :
	Function Name            Language  Pointer (1-set / 0-unset)
	------------------------------------------------------------

	Refresh                  c         1
	Destroy                  c         1
	ComputeArgumentsCreate   c         1
	ComputeArgumentsDestroy  c         1
	Compute                  c         1

Numbering : zeroBased

Units :
	Length Unit      : A
	Energy Unit      : eV
	Charge Unit      : unused
	Temperature Unit : unused
	Time Unit        : unused

Influence Distance : 8.1500000000e+00

Number Of Neighbor Lists : 1
Neighbor List Cutoffs :
	index : cutoff distance     paddingNeighborHint      halfListHint
	--------------------------------------------------------------------
	0     : 8.1500000000e+00    1                        0


Supported Species :
	Species   Code
	--------------------

	Ar        1

Number Of Prameters : 0
	index   Data Type Extent    Pointer        Description
	--------------------------------------------------------------------


Buffers
	Buffer         Pointer
	------------------------------

	Model          0x7b841970
	Simulator      0

================================================================================


$ cd ..
#//! [Step3 test example]

#//! [Install step4 models]
$ kim-api-v2-collections-management install --force system ./v1-v2-porting/models/step4/ex_model_Ar_P_MLJ_F03
Installing..... Model.......... ex_model_Ar_P_MLJ_F03_step4.

Success!

$ kim-api-v2-collections-management install --force system ./v1-v2-porting/models/step4/ex_model_Ar_P_Morse_07C
Installing..... Model.......... ex_model_Ar_P_Morse_07C_step4.

Success!
#//! [Install step4 models]

#//! [Step4 test example]
$ cd v2-ex_test_Ar_fcc_cluster
$ printf ex_model_Ar_P_Morse_07C_step4 | ./ex_test_Ar_fcc_cluster
Please enter valid KIM Model name:
================================================================================

Model object
------------

Model Name : ex_model_Ar_P_Morse_07C_step4
Log ID : 0x7864b310

Model Supplied Functions :
	Function Name            Language  Pointer (1-set / 0-unset)
	------------------------------------------------------------

	Refresh                  c         1
	Destroy                  c         1
	ComputeArgumentsCreate   c         1
	ComputeArgumentsDestroy  c         1
	Compute                  c         1

Numbering : zeroBased

Units :
	Length Unit      : A
	Energy Unit      : eV
	Charge Unit      : unused
	Temperature Unit : unused
	Time Unit        : unused

Influence Distance : 8.1500000000e+00

Number Of Neighbor Lists : 1
Neighbor List Cutoffs :
	index : cutoff distance     paddingNeighborHint      halfListHint
	--------------------------------------------------------------------
	0     : 8.1500000000e+00    1                        0


Supported Species :
	Species   Code
	--------------------

	Ar        1

Number Of Prameters : 0
	index   Data Type Extent    Pointer        Description
	--------------------------------------------------------------------


Buffers
	Buffer         Pointer
	------------------------------

	Model          0x7864ba50
	Simulator      0

================================================================================

================================================================================

ComputeArguments object
-----------------------

Model Name : ex_model_Ar_P_Morse_07C_step4
Log ID : 0x7864b310_0x78747ed0

Compute Arguments :
	Compute Argument Name    SupportStatus            Pointer
	---------------------------------------------------------------------------

	numberOfParticles        requiredByAPI            0
	particleSpeciesCodes     requiredByAPI            0
	particleContributing     requiredByAPI            0
	coordinates              requiredByAPI            0
	partialEnergy            optional                 0
	partialForces            optional                 0
	partialParticleEnergy    optional                 0
	partialVirial            notSupported             N/A
	partialParticleVirial    notSupported             N/A

Compute Callback Functions :
	Compute Callback Name    SupportStatus  Language    Data Pointer             Pointer (1-set / 0-unset)
	------------------------------------------------------------------------------------------------------

	GetNeighborList          requiredByAPI  cpp         0                        0
	ProcessDEDrTerm          optional       cpp         0                        0
	ProcessD2EDr2Term        optional       cpp         0                        0

Buffers
	Buffer         Pointer
	------------------------------

	Model          0
	Simulator      0

================================================================================


$ cd ..
#//! [Step4 test example]

#//! [Step5 install models]
$ kim-api-v2-collections-management install --force system ./v1-v2-porting/models/step5/ex_model_Ar_P_MLJ_F03
Installing..... Model.......... ex_model_Ar_P_MLJ_F03_step5.

Success!

$ kim-api-v2-collections-management install --force system ./v1-v2-porting/models/step5/ex_model_Ar_P_Morse_07C
Installing..... Model.......... ex_model_Ar_P_Morse_07C_step5.

Success!
#//! [Step5 install models]

#//! [Step6 install models]
$ kim-api-v2-collections-management install --force system ./v1-v2-porting/models/step6/ex_model_Ar_P_MLJ_F03
Installing..... Model.......... ex_model_Ar_P_MLJ_F03.

Success!

$ kim-api-v2-collections-management install --force system ./v1-v2-porting/models/step6/ex_model_Ar_P_Morse_07C
Installing..... Model.......... ex_model_Ar_P_Morse_07C.

Success!
#//! [Step6 install models]

#//! [Step7 test example]
$ cd v2-ex_test_Ar_fcc_cluster
$ printf ex_model_Ar_P_MLJ_F03 | ./ex_test_Ar_fcc_cluster
Please enter valid KIM Model name:
This is Test  : ex_test_Ar_fcc_cluster
--------------------------------------------------------------------------------
Results for KIM Model : ex_model_Ar_P_MLJ_F03
              Energy,           Force Norm,      Lattice Spacing
    2.6568305947e+01,     1.2671877978e+01,     4.2080000000e+00
    1.5269225751e+01,     7.9639127468e+00,     4.3395000000e+00
    8.1940651929e+00,     4.9863838571e+00,     4.4710000000e+00
    3.7947024307e+00,     3.0924620572e+00,     4.6025000000e+00
    1.0980474405e+00,     1.8835116189e+00,     4.7340000000e+00
   -5.1288233270e-01,     1.1111343811e+00,     4.8655000000e+00
   -1.4321763817e+00,     6.1892128072e-01,     4.9970000000e+00
   -1.9129769394e+00,     3.0756389059e-01,     5.1285000000e+00
   -2.1185529279e+00,     1.1421905922e-01,     5.2600000000e+00
   -2.1545585638e+00,     2.4987808283e-02,     5.3915000000e+00
   -2.0893135757e+00,     8.1104969450e-02,     5.5230000000e+00
   -1.9668026189e+00,     1.1844534144e-01,     5.6545000000e+00
   -1.8151243558e+00,     1.3646818860e-01,     5.7860000000e+00
   -1.6520140667e+00,     1.4203290937e-01,     5.9175000000e+00
   -1.4884681605e+00,     1.3991074278e-01,     6.0490000000e+00
   -1.3310358744e+00,     1.3327798308e-01,     6.1805000000e+00

$ printf ex_model_Ar_P_Morse_07C | ./ex_test_Ar_fcc_cluster
Please enter valid KIM Model name:
This is Test  : ex_test_Ar_fcc_cluster
--------------------------------------------------------------------------------
Results for KIM Model : ex_model_Ar_P_Morse_07C
              Energy,           Force Norm,      Lattice Spacing
    1.4703219623e+01,     6.9678657557e+00,     4.2080000000e+00
    8.2453550705e+00,     4.8650873812e+00,     4.3395000000e+00
    3.7883556879e+00,     3.3409407134e+00,     4.4710000000e+00
    7.7810749699e-01,     2.2399352517e+00,     4.6025000000e+00
   -1.1944148939e+00,     1.4518130136e+00,     4.7340000000e+00
   -2.4291941022e+00,     8.9239060716e-01,     4.8655000000e+00
   -3.1445433206e+00,     5.0063786968e-01,     4.9970000000e+00
   -3.4996095359e+00,     2.3199479279e-01,     5.1285000000e+00
   -3.6112724693e+00,     6.3687021777e-02,     5.2600000000e+00
   -3.5604853404e+00,     8.7536239707e-02,     5.3915000000e+00
   -3.4059878193e+00,     1.5700051389e-01,     5.5230000000e+00
   -3.1896247548e+00,     1.9909723852e-01,     5.6545000000e+00
   -2.9407853637e+00,     2.1928061006e-01,     5.7860000000e+00
   -2.6800661721e+00,     2.2574027063e-01,     5.9175000000e+00
   -2.4197463013e+00,     2.2234487833e-01,     6.0490000000e+00
   -2.1685167432e+00,     2.1265537489e-01,     6.1805000000e+00

$ cd ..
#//! [Step7 test example]


#//! [Copy and run v1 simulator]
$ cp -r ./v1-v2-porting/simulators/step1/ex_test_Ar_fcc_cluster v1-ex_test_Ar_fcc_cluster-step1
$ cd v1-ex_test_Ar_fcc_cluster-step1
$ make
$ printf ex_model_Ar_P_MLJ_F03 | ./ex_test_Ar_fcc_cluster
Please enter valid KIM Model name:
This is Test  : ex_test_Ar_fcc_cluster
--------------------------------------------------------------------------------
Results for KIM Model : ex_model_Ar_P_MLJ_F03
              Energy,           Force Norm,      Lattice Spacing
    2.6568305947e+01,     1.2671877978e+01,     4.2080000000e+00
    1.5269225751e+01,     7.9639127468e+00,     4.3395000000e+00
    8.1940651929e+00,     4.9863838571e+00,     4.4710000000e+00
    3.7947024307e+00,     3.0924620572e+00,     4.6025000000e+00
    1.0980474405e+00,     1.8835116189e+00,     4.7340000000e+00
   -5.1288233270e-01,     1.1111343811e+00,     4.8655000000e+00
   -1.4321763817e+00,     6.1892128072e-01,     4.9970000000e+00
   -1.9129769394e+00,     3.0756389059e-01,     5.1285000000e+00
   -2.1185529279e+00,     1.1421905922e-01,     5.2600000000e+00
   -2.1545585638e+00,     2.4987808283e-02,     5.3915000000e+00
   -2.0893135757e+00,     8.1104969450e-02,     5.5230000000e+00
   -1.9668026189e+00,     1.1844534144e-01,     5.6545000000e+00
   -1.8151243558e+00,     1.3646818860e-01,     5.7860000000e+00
   -1.6520140667e+00,     1.4203290937e-01,     5.9175000000e+00
   -1.4884681605e+00,     1.3991074278e-01,     6.0490000000e+00
   -1.3310358744e+00,     1.3327798308e-01,     6.1805000000e+00

$ cd ..
#//! [Copy and run v1 simulator]


#//! [Copy v2 simulator]
$ cp -r ./v1-v2-porting/simulators/step5/ex_test_Ar_fcc_cluster v2-ex_test_Ar_fcc_cluster
cp: v2-ex_test_Ar_fcc_cluster/ex_test_Ar_fcc_cluster: Not a directory
cp: v2-ex_test_Ar_fcc_cluster/ex_test_Ar_fcc_cluster/ex_test_Ar_fcc_cluster.c: Not a directory
cp: v2-ex_test_Ar_fcc_cluster/ex_test_Ar_fcc_cluster/Makefile: Not a directory
#//! [Copy v2 simulator]

#//! [Run v2 simulator]
$ cd v2-ex_test_Ar_fcc_cluster
$ make
$ printf ex_model_Ar_P_MLJ_F03 | ./ex_test_Ar_fcc_cluster
Please enter valid KIM Model name:
This is Test  : ex_test_Ar_fcc_cluster
--------------------------------------------------------------------------------
Results for KIM Model : ex_model_Ar_P_MLJ_F03
              Energy,           Force Norm,      Lattice Spacing
    2.6568305947e+01,     1.2671877978e+01,     4.2080000000e+00
    1.5269225751e+01,     7.9639127468e+00,     4.3395000000e+00
    8.1940651929e+00,     4.9863838571e+00,     4.4710000000e+00
    3.7947024307e+00,     3.0924620572e+00,     4.6025000000e+00
    1.0980474405e+00,     1.8835116189e+00,     4.7340000000e+00
   -5.1288233270e-01,     1.1111343811e+00,     4.8655000000e+00
   -1.4321763817e+00,     6.1892128072e-01,     4.9970000000e+00
   -1.9129769394e+00,     3.0756389059e-01,     5.1285000000e+00
   -2.1185529279e+00,     1.1421905922e-01,     5.2600000000e+00
   -2.1545585638e+00,     2.4987808283e-02,     5.3915000000e+00
   -2.0893135757e+00,     8.1104969450e-02,     5.5230000000e+00
   -1.9668026189e+00,     1.1844534144e-01,     5.6545000000e+00
   -1.8151243558e+00,     1.3646818860e-01,     5.7860000000e+00
   -1.6520140667e+00,     1.4203290937e-01,     5.9175000000e+00
   -1.4884681605e+00,     1.3991074278e-01,     6.0490000000e+00
   -1.3310358744e+00,     1.3327798308e-01,     6.1805000000e+00

$ cd ..
#//! [Run v2 simulator]

#//! [Copy v2 cpp and fortran simulators]
$ cp -r ./v1-v2-porting/simulators/step5/ex_test_Ar_fcc_cluster_cpp v2-ex_test_Ar_fcc_cluster_cpp
$ cp -r ./v1-v2-porting/simulators/step5/ex_test_Ar_fcc_cluster_fortran v2-ex_test_Ar_fcc_cluster_fortran
#//! [Copy v2 cpp and fortran simulators]

#//! [Run cpp and fortran simulators]
$ cd v2-ex_test_Ar_fcc_cluster_cpp
$ make
$ printf ex_model_Ar_P_Morse_07C | ./ex_test_Ar_fcc_cluster_cpp
Please enter valid KIM Model name:
LengthUnit is "A"
EnergyUnit is "eV"
ChargeUnit is "unused"
TemperatureUnit is "unused"
TimeUnit is "unused"
ComputeArgument Name "numberOfParticles" is of type "Integer" and has supportStatus "requiredByAPI"
ComputeArgument Name "particleSpeciesCodes" is of type "Integer" and has supportStatus "requiredByAPI"
ComputeArgument Name "particleContributing" is of type "Integer" and has supportStatus "requiredByAPI"
ComputeArgument Name "coordinates" is of type "Double" and has supportStatus "requiredByAPI"
ComputeArgument Name "partialEnergy" is of type "Double" and has supportStatus "optional"
ComputeArgument Name "partialForces" is of type "Double" and has supportStatus "optional"
ComputeArgument Name "partialParticleEnergy" is of type "Double" and has supportStatus "optional"
ComputeArgument Name "partialVirial" is of type "Double" and has supportStatus "notSupported"
ComputeArgument Name "partialParticleVirial" is of type "Double" and has supportStatus "notSupported"
ComputeCallback Name "GetNeighborList" has supportStatus "requiredByAPI"
ComputeCallback Name "ProcessDEDrTerm" has supportStatus "optional"
ComputeCallback Name "ProcessD2EDr2Term" has supportStatus "optional"
Model has influence distance of : 8.15
Model has numberOfNeighborLists : 1
	Neighbor list 0 has cutoff 8.15 with paddingNeighborHint 1 and halfListHint 0
This is Test : ex_test_Ar_fcc_cluster_cpp
--------------------------------------------------------------------------------
Results for KIM Model : ex_model_Ar_P_Morse_07C
              Energy          Force Norm     Lattice Spacing
    1.4703219623e+01    6.9678657557e+00    4.2080000000e+00
    8.2453550705e+00    4.8650873812e+00    4.3395000000e+00
    3.7883556879e+00    3.3409407134e+00    4.4710000000e+00
    7.7810749699e-01    2.2399352517e+00    4.6025000000e+00
   -1.1944148939e+00    1.4518130136e+00    4.7340000000e+00
   -2.4291941022e+00    8.9239060716e-01    4.8655000000e+00
   -3.1445433206e+00    5.0063786968e-01    4.9970000000e+00
   -3.4996095359e+00    2.3199479279e-01    5.1285000000e+00
   -3.6112724693e+00    6.3687021777e-02    5.2600000000e+00
   -3.5604853404e+00    8.7536239707e-02    5.3915000000e+00
   -3.4059878193e+00    1.5700051389e-01    5.5230000000e+00
   -3.1896247548e+00    1.9909723852e-01    5.6545000000e+00
   -2.9407853637e+00    2.1928061006e-01    5.7860000000e+00
   -2.6800661721e+00    2.2574027063e-01    5.9175000000e+00
   -2.4197463013e+00    2.2234487833e-01    6.0490000000e+00
   -2.1685167432e+00    2.1265537489e-01    6.1805000000e+00

$ cd ..
$ cd v2-ex_test_Ar_fcc_cluster_fortran
$ make
$ printf ex_model_Ar_P_Morse_07C | ./ex_test_Ar_fcc_cluster_fortran
Please enter a valid KIM model name:

 This is Test : ex_test_Ar_fcc_cluster_fortran

--------------------------------------------------------------------------------
Results for KIM Model : ex_model_Ar_P_Morse_07C
              Energy          Force Norm     Lattice Spacing
    1.4703215955E+01    6.9678645853E+00    4.2080000627E+00
    8.2453524404E+00    4.8650865034E+00    4.3395000647E+00
    3.7883538362E+00    3.3409400589E+00    4.4710000666E+00
    7.7810622791E-01    2.2399347674E+00    4.6025000686E+00
   -1.1944157316E+00    1.4518126584E+00    4.7340000705E+00
   -2.4291946228E+00    8.9239034976E-01    4.8655000725E+00
   -3.1445436110E+00    5.0063768619E-01    4.9970000745E+00
   -3.4996096616E+00    2.3199466611E-01    5.1285000764E+00
   -3.6112724807E+00    6.3686958966E-02    5.2600000784E+00
   -3.5604852727E+00    8.7536289674E-02    5.3915000803E+00
   -3.4059876997E+00    1.5700054839E-01    5.5230000823E+00
   -3.1896246031E+00    1.9909725795E-01    5.6545000843E+00
   -2.9407851953E+00    2.1928061852E-01    5.7860000862E+00
   -2.6800659962E+00    2.2574027119E-01    5.9175000882E+00
   -2.4197461252E+00    2.2234487350E-01    6.0490000901E+00
   -2.1685165719E+00    2.1265536654E-01    6.1805000921E+00
   -1.9316933369E+00    1.9920520002E-01    6.3120000941E+00

$ cd ..
#//! [Run cpp and fortran simulators]
